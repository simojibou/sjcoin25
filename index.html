<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SJ COIN - المهام اليومية من Firebase</title>
<style>
  body { font-family: Arial, sans-serif; background: #f7f7f7; padding: 20px; }
  .task { background: #fff; margin-bottom: 15px; padding: 10px; border-radius: 8px; display: flex; align-items: center; }
  .task img { width: 60px; height: 60px; object-fit: cover; border-radius: 8px; margin-left: 15px; }
  .task-info { flex-grow: 1; }
  .task-name { font-weight: bold; font-size: 18px; margin-bottom: 5px; }
  .task-link { color: #0077cc; text-decoration: none; }
  .task-coins { color: #444; margin-bottom: 5px; }
</style>
</head>
<body>

<h2>مهامك اليومية من Firebase</h2>

<div id="tasks">جارِ تحميل المهام...</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// إعداد Firebase بمعلومات مشروعك
const firebaseConfig = {
  apiKey: "AIzaSyCw46Dkka-64h7Rc3VIS9fZmvrfvbUCTjY",
  authDomain: "metawarefare-gaming.firebaseapp.com",
  databaseURL: "https://metawarefare-gaming-default-rtdb.firebaseio.com",
  projectId: "metawarefare-gaming",
  storageBucket: "metawarefare-gaming.appspot.com",
  messagingSenderId: "551352148152",
  appId: "1:551352148152:web:1b8fe7257e19fba720d44d"
};
firebase.initializeApp(firebaseConfig);

const db = firebase.database();

function renderTasks(tasks) {
  const container = document.getElementById("tasks");
  container.innerHTML = "";
  
  if (!tasks) {
    container.innerHTML = "<p>لا توجد مهام حالياً.</p>";
    return;
  }
  
  Object.keys(tasks).forEach(key => {
    const task = tasks[key];
    const taskDiv = document.createElement("div");
    taskDiv.className = "task";
    
    // تعويض الصور النسبية لو تحتاج (يمكن تعدل حسب الاستضافة)
    let imgSrc = task.image;
    if (!imgSrc.startsWith("http")) {
      imgSrc = "https://yourdomain.com" + imgSrc; // عدل هذا لو عندك استضافة خاصة للصور
    }
    
    taskDiv.innerHTML = `
      <img src="${imgSrc}" alt="${task.name}" />
      <div class="task-info">
        <div class="task-name">${task.name}</div>
        <a href="${task.link}" target="_blank" class="task-link">اذهب إلى المهمة</a>
        <div class="task-coins">مكافأة: ${task.reward_coins} عملة SJ</div>
      </div>
    `;
    
    container.appendChild(taskDiv);
  });
}

// الاستماع للمهام من Firebase Realtime Database
db.ref("DailyTasks").on("value", snapshot => {
  const data = snapshot.val();
  renderTasks(data);
}, error => {
  document.getElementById("tasks").innerHTML = "خطأ في تحميل المهام: " + error.message;
});
</script>

</body>
</html>
